<!DOCTYPE html>
<html>
<head>
<title>Quaine's Neural</title>
</head>
<style type="text/css">
	canvas { border: 1px solid #ccc }
@keyframes blink {
    0% {
        opacity: 1;
    }
    50% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}
  .my_animation1{
    animation: blink 3s 0.2s;
    animation-iteration-count: infinite;
}
  .my_animation2{
    animation: blink 3s 1s;
    animation-iteration-count: infinite;
}
  .my_animation3{
    animation: blink 3s 1.8s;
    animation-iteration-count: infinite;
}
</style>
<!-- <canvas id="c" width="1000" height="500"></canvas> -->

<div style="text-align: center; padding: 50px" onclick="test()">
	<div style="display: inline-block; margin-right: 50px;position: absolute;left: 200px;top:200px">
		<img src="greencircle.png" width="100" height="100" style="opacity:0.5" id="img1">
	</div>
	<div style="display: inline-block; margin-right: 50px;position: absolute;left: 400px;top:200px">
		<img src="redcircle.png" width="100" height="100" style="opacity:0.5" id="img2">
	</div>
	<div style="display: inline-block;position: absolute;left: 600px;top:200px">
		<img src="yellowcircle.png" width="100" height="100" style="opacity:0.5" id="img3">
	</div>
	<div>
	<img src="brain-connectivity.png" width="700" height="500">

	</div>


</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>


<script>



var  yellow =0;

var red =0; 
var green=0;
var stopanimation=0;
test();
   function test(){
      if (stopanimation==1) {
      	$("#img1").removeClass('my_animation1');
      	$("#img2").removeClass('my_animation2');
      	$("#img3").removeClass('my_animation3');
      	var element = document.getElementById('img1');
            element.style.opacity = "1.0";
            var element2 = document.getElementById('img2');
          element2.style.opacity = "1.0";
       	var element3 = document.getElementById('img3');
            element3.style.opacity = "1.0";
      }
      if (stopanimation==0) {
      if (red==0 && yellow==0) {
      	$("#img1").addClass('my_animation1');
      }
     
     if (red==1) {
     	 $("#img2").addClass('my_animation2');
     	 red=0;
     }
    if (yellow==1) {
    	 $("#img3").addClass('my_animation3');
    	 yellow=0;
    }

}
    
   }




//vowels.toString(); 
// var inputs  = [12 , 4];
// var weights = [0.5, -1];

// var sum = 0;
// for (var i = 0; i < inputs.length; i++) {
//   sum += inputs[i]*weights[i];
// }
 
//  console.log(sum)

// var output = activate(sum);



//30-39  = apples ; 40-49 = oranges

//var inputs = [20,20,20,20,20,20,20,20,20,20,30,30,30,30,30,30,30,30,30,30,40,40,40,40,40,40,40,40,40,40, 50, 50, 50, 50,50,50,50,50,50,50];

//33,41,35,38, 42, 45
var inputs = [33,41,35,38, 42, 45]//33,41,35,38
var trainingoutputs =[1,-1,1,1, -1, -1 ]

//29,72,91,50, 65, 31, 33, 30
//1,-1,1,1, -1, -1, -1,-1



//var trainingoutputs =[1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4];
console.log(inputs.length);
console.log(trainingoutputs.length)
var inputQ;  //predicter input


var dontchangeweight=0;
var remembermultiplier=[];
var secretindex=[];
var secretanswer=[];
console.log(inputs, trainingoutputs)
var weights =[]; 
var originalweights=[];
var masterweights=[];

var secretweight=[];
var totalerror=[];
perception(); //generates the weights
function perception () {
weights = [];
 for (var i = 0; i < inputs.length; i++) {
var num = Math.random(Math.random() * -1 + 1);
     weights.push(num);
      originalweights.push(num);
      // weights[i] = random(-1,1);
    }
    //originalweights=weights;
console.log('normal weight', originalweights)
}




  var sum = 0;
 var massivesum=[];
  feedforward();
 
function feedforward () {
  // console.log('tho9', weights)
    for (var i = 0; i < weights.length; i++) {
      sum = inputs[i]*weights[i];//if no +  i had sum+=1
      //console.log('tho9', inputs[i], 'tho9', weights[i],'sum', sum)
//console.log(massivesum.length)
if (sum > 0) {
 
  output='output is 1';
  var array=[1, 2, 3, 4];
 var randy= array[Math.floor(Math.random()*array.length)];
remembermultiplier.push(randy);

//console.log('why',remembermultiplier);
//  if (dontchangeweight==1) {
//  	if (remembermultiplier.length==1) {
//  	randy=remembermultiplier[0];
// }
// if (remembermultiplier.length>1) {
//  randy = remembermultiplier[remembermultiplier.length - 1];
// }

// //console.log('why2',randy);

//  }
  var kid=1;

   massivesum.push(kid);
   //console.log('result', output);
}


if (sum< 0) {
   output='output is -1';
  var array=[-1, -2, -3, -4];

 var randy= array[Math.floor(Math.random()*array.length)];
//  remembermultiplier.push(randy);
//  if (dontchangeweight==1) {
//  	if (remembermultiplier.length==1) {
//  	randy=remembermultiplier[0];
// }
// if (remembermultiplier.length>1) {
//  randy = remembermultiplier[remembermultiplier.length - 1];
// }

// }
  var kid=-1;
  //console.log('randy',kid)
massivesum.push(kid);
//console.log('result', output);
}

dontchangeweight=0; 
//console.log('annoy',sum)

// if (sum<=1) {
// 	 output='output is 1';
//   var kid=1;
// console.log('first',sum)
//    massivesum.push(kid);
// }

// if (sum>1 && sum<=2) {
// 	 output='output is 2';
//   var kid=2;
// console.log('second',sum)
//    massivesum.push(kid);
// }

// if (sum>2 && sum<=3) {
// 	 output='output is 3';
// 	 console.log('third',sum)
//   var kid=3;

//    massivesum.push(kid);
// }


// if (sum>=4) {
// 	 output='output is 4';
// 	 console.log('fourth',sum)
//   var kid=4;

//    massivesum.push(kid);
// }



         // massivesum.push(sum);

    }

    // var randominput = inputs[Math.floor(Math.random()*inputs.length)];
    // var randomweight = weights[Math.floor(Math.random()*weights.length)];
// console.log('guesses', massivesum)
// console.log('desired', trainingoutputs)

	train();


    //sum=0; 
    // console.log('randominput', randominput)
    //   console.log('randomweight', randomweight)
    //sum += randominput*randomweight;

        //return activate(sum);
}


var output='';
function activate (sum) {
  console.log('boogie',sum)
if (sum > 0) {
 
  output='output is 1';
  var kid=1;
  console.log('result', output);

   //massivesum.push(kid);
}
else

 output='output is -1';
var kid = -1;
console.log('result', output);
//massivesum.push(kid);
}





///training 





// for(var i=0; i>-100; i++) {
  
// }


function train () {
var learningrate = 0.09;
 //totalerror=[];
  //console.log('massive',massivesum.length)
  for(var m = 0; m<massivesum.length; m++) {//
var guess = massivesum[m];
var desired = trainingoutputs[m];
var error = desired - guess;
if (totalerror.length<inputs.length) {
totalerror.push(error);
}
if (totalerror.length==weights.length) {
	var index = totalerror[m];

var nono=0;
index=parseInt(index)
if (index==0) {
	
	nono=1;
	}

	if (nono==0) {
		//console.log(index)
		totalerror[m] = error;
	}
   
}



 // for (var i = 0; i < weights.length; i++) {
 //    weights[i] += learningrate * error * inputs[i];//massivesum
 //  }

  }//
 
   //console.log('total error', totalerror, 'length',weights.length)

  // //if error is zero, don't adjust the weight
  //  console.log('adjusted weights', weights)

   //feedforward();

     var checkItem = totalerror[0];
     //check when total error = 0;
var isSame = 0;
for (var i = 0; i < totalerror.length; i++) {
isSame=1;
  if (totalerror[i] != checkItem) {
    isSame = 0;
    break;
  }


}
// return isSame;
if (isSame==1) {
  console.log('finish')
  stopanimation=1;
  test();
inputQ=30;//47对   100-129  wrong 30000- midpoint calculations
  setTimeout(predict,1000)
}

if (isSame==0) {
  setTimeout(dontchange,1000)

}


}




function dontchange () {
//   console.log('what',originalweights)
// weights=originalweights;
//console.log('what222',weights)
var newweights=[];
//console.log(totalerror)

 for (var i = 0; i < totalerror.length; i++) {
var dd=0;
//console.log('bott',weights.length)
  var st=totalerror[i];
  //var st2=weights[i];
  var st3=weights[i];
  // if (newweights.length>1) {
  //   st2=newweights[i];
  //   console.log('ryu', st2)
  // }
  //st=parseInt(st)
//console.log('ss5',st)

//console.log('pop', st, st3)
  if (st=='0'||st==0) {
  	//console.log('pop2',remembermultiplier)
  	dontchangeweight=1;
  	secretindex.push(st)
  	//console.log('pop3',secretindex)

dd=1;
yellow=1;
	var element3 = document.getElementById('img3');
            element3.style.opacity = "1.0";
test();
    //console.log('dont change weight', st3)
newweights.push(st3)//get original weight because not wrong

  }
  if (dd==0) {
  	//console.log('pop3')
  	red=1;
  	test();
  //console.log('change weight')
   var pt;
   if (secretweight.length==1) {
    pt=secretweight[0];
   }
  if (secretweight.length>1) {
     pt = secretweight[secretweight.length - 1];
  }
  
st2 = Math.random(Math.random() * -1 + 1);   //if i put -1 it is a bias//-1

var changeweight = pt-st2;
var finalweight=Math.abs(changeweight);
//console.log('that cookie',finalweight)
if (finalweight<=0.5) {
  st2=st2-0.5;
  

  //console.log('that brownie',st2)
}
secretweight.push(st2);
  newweights.push(st2)
}

 }


secretindex=[]
remembermultiplier=[];

 //console.log(newweights)
  //console.log('still error', newweights)
  weights=[];
 weights=newweights;


///newweights=[];
 sum=0;
 //totalerror=[];
 massivesum=[];


  //console.log('corrected weights',weights)

  
 feedforward();
   

     //setTimeout(train,5000)
  


}


function predict () {
  var differencearray=[];
for(var i=0; i<inputs.length; i++) {
    var int=inputs[i];
   var num1 = inputQ-int;
   var num2 =Math.abs(num1);
   differencearray.push(num2);



}
    console.log(differencearray)

    Array.min = function( array ){
    return Math.min.apply( Math, array );
};

var minimum = Array.min(differencearray);
console.log(minimum)

var index= differencearray.indexOf(minimum);

var orgininput=inputs[index];//input

var thatweight = weights[index];

console.log(weights);
console.log(totalerror)


var result= inputQ*thatweight;
var thatanwser=trainingoutputs[index];
console.log(orgininput,thatanwser)

//result=Math.log(result);
//result=Math.sqrt(result)
console.log(result, thatweight, inputQ)

if (result>0) {
  console.log('1');
}

if (result<0) {
  console.log('-1');
}

}

// result=result-1;
// if (result<=1) {

// console.log('final answer = 1')
  
// }

// if (result>1 && result<=2) {
// 	console.log('final answer = 2')
// }

// if (result>2 && result<=3) {
// console.log('final answer = 3')
// }


// if (result>=4) {
// console.log('final answer = 4')
// }

// //error = var error = desired - guess;
// }
//error rate = desired output - guess output

//ΔWEIGHT = ERROR * INPUT

//Therefore:
//error = desired result - guess
//NEW WEIGHT = WEIGHT + ERROR * INPUT
//NEW WEIGHT = WEIGHT + ERROR * INPUT * LEARNING CONSTANT  (option)



</script>

</html>
