<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
</head>
<body >

<!-- onload="documentReady();" -->
</body>

<style type="text/css">
.page-wrap {
width: 960px;
margin: 0 auto;
position: relative;
}

  canvas { border: 1px solid #ccc }
  .ribbon {
  position:absolute;
  top:0;
  right:0;
}


#container {
  width: 400px;
  height: 400px;
  position: relative;
  background: yellow;
}
#animate {
  width: 50px;
  height: 50px;
  position: absolute;
  background-color: blue;
}


</style>
<canvas id="c" width="500" height="400" style="border:2px solid black"></canvas>
<button onclick="myMove()">Start</button>


<div id ="container">
<div id ="animate"></div>
</div>
<!-- <div id= "bluebox" class="box" style="background-color:#00FFFF;width:10px;height:5px;padding:10px;"> -->
  <div id= "bluebox"> 
     <img src="hero.png" height="40" width="40">
  </div>





<!-- <canvas id="c" width="1000" height="500" style="border: 1px solid black;"></canvas> -->
<script src='https://code.responsivevoice.org/responsivevoice.js'></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script>
  var secretArrayX=[500, 520,530,545,560,523, 300, 210];
  var secretArrayY=[200,221,220,211,278,290, 154,209];
  var tuy = document.getElementById('bluebox');
var storedx=[];
var storedy=[];
  var mousePressed = false;
var lastX, lastY;
var ctx;
 var el = document.getElementById('c');
var isDown=1;
var isDrawing;

var pluscounter=0; 
var lastXX;
  var lastYY;
  var onlyonce=0;

var countseconds =0; 

var pleasestopsound =0;













  //myMove();


//parcel

  var seconds = 00; 
  var tens = 00; 
    var appendTens =  document.createElement("div99");
  appendTens.style.position="absolute";
 appendTens.style.left = 420+'px';
appendTens.style.top = 500+'px';
appendTens.innerHTML = "00";
document.body.appendChild(appendTens);

      var appendSeconds =  document.createElement("div98");
        appendSeconds.style.position="absolute";
 appendSeconds.style.left = 400+'px';
appendSeconds.style.top = 500+'px';
appendSeconds.innerHTML = "00:";
document.body.appendChild(appendSeconds);

  var div = document.createElement("div9");
  div.id = 'someId';
 div.style.width = "10px";
div.style.height = "10px";
div.style.background = "red";
div.style.color = "white";

div.innerHTML = "Move Calibro with draw on the canvas, don't get hit by the blue square";
  div.style.left = 399+'px';
div.style.top = 74+'px';
 document.body.appendChild(div);

 //parcel

var fx;
var fy;
 el.onmousedown = function(e) {
isDown=1;
  isDrawing = true;
console.log('wtf')
 }
 var beauty=0;
el.onmousemove = function(e) {
  beauty++;

function removeDuplicateUsingFilter(arr){
    let unique_array = arr.filter(function(elem, index, self) {
        return index == self.indexOf(elem);
    });
    return unique_array
}



  collision($("#animate"), $("#bluebox"));

  InitThis();
  if (isDrawing==1) {

  //console.log("llo2",e.clientX, e.clientY)



var checkx= e.clientX-500;
var checky = e.clientY;
  for(var i=0; i<storedy.length; i++) {
   var x= storedx[i];
   var y=storedy[i];

if (checkx==x && checky == y) {
  console.log('master collision')
}

//   var div2 = document.createElement("pun");
//   div2.id = 'magicdiv'+beauty+'';
//  div2.style.width = "5px";
// div2.style.height = "5px";
// div2.style.background = "green";
//  div2.style.position="absolute";
//   div2.style.left = x;
// div2.style.top = y;
//  document.body.appendChild(div2);

  }



//moves calibro
var tuy = document.getElementById('bluebox');
tuy.style.position="absolute";
  tuy.style.left = e.clientX-500+'px';
 tuy.style.top = e.clientY+'px';

 if (storedx.indexOf(tuy.style.left)>-1 && storedy.indexOf(tuy.style.top)>-1) {
  console.log('BRUH collision')
 }

   storedx.push(tuy.style.left);
  storedy.push(tuy.style.top);
// document.body.appendChild(tuy);


}

}

el.onmouseup = function(e) {
  //console.log(storedx,storedy)
  //setTimeout(detect,2000);
    $('#animate').attr('style', 'background-color: blue');
    isDrawing = false;
isDown=0;
  }


function detect () {


}
function InitThis() {
 
    ctx = document.getElementById('c').getContext("2d");

    $('#c').mousedown(function (e) {
        mousePressed = true;
         //console.log("llo1")
        Draw(e.pageX - $(this).offset().left, e.pageY - $(this).offset().top, false);
    });

    $('#c').mousemove(function (e) {
        if (mousePressed) {

            Draw(e.pageX - $(this).offset().left, e.pageY - $(this).offset().top, true);

        }
    });

    $('#c').mouseup(function (e) {
        mousePressed = false;
    });
      $('#c').mouseleave(function (e) {
        mousePressed = false;
    });
}

function Draw(x, y, isDown) {
    if (isDown) {
        ctx.beginPath();
        ctx.strokeStyle = $('#selColor').val();
        ctx.lineWidth = $('#selWidth').val();
        ctx.lineJoin = "round";
            //console.log( lastX, lastY, x, y)
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(x, y);
        ctx.closePath();
        ctx.stroke();
    }
    lastX = x; lastY = y;
}
  
function clearArea() {
    // Use the identity matrix while clearing the canvas
    ctx.setTransform(1, 0, 0, 1, 0, 0);
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
}
   var blue =document.getElementById('c');
blue.style.position="absolute";
 blue.style.left = 418+'px';
blue.style.top = 30+'px';





//  var platfromblue =document.getElementById('bluebox');
// platfromblue.style.position="absolute";
//  platfromblue.style.left = 18+'px';
// platfromblue.style.top = 430+'px';
//platfromblue.style.visibility ='hidden';

// }());

function myMove() {
  setInterval(startTimer, 10);
  function getRandomInt(max) {
  return Math.floor(Math.random() * Math.floor(max));
}

  var elem = document.getElementById("animate");   
  var pos = 0;
  var id = setInterval(frame, 1000);
var los =0; 

  function frame() {
    if (pos == 350) {
      clearInterval(id);
    } else {
      //pos++; 
 pos = getRandomInt(260)
 los = getRandomInt(400)
 //console.log(pos,los)
     
      elem.style.left = pos + 'px';   //17>    <260
       elem.style.top = los + 'px';   //>30 <430
    }
  }
}





  function startTimer () {


    tens++; 
    
    if(tens < 9){
      appendTens.innerHTML = "0" + tens;
    }
    
    if (tens > 9){
      appendTens.innerHTML = tens;
      
    } 
    
    if (tens > 99) {
      console.log("seconds");
      seconds++;
      appendSeconds.innerHTML = "0" + seconds + ":";
      tens = 0;
      appendTens.innerHTML = "0" + 0;
    }
    
    if (seconds > 9){
      appendSeconds.innerHTML = seconds + ":";
    }
  
  }
  
















  function myMove2 () {
pleasestopsound=1;
    
      
  

    ctx = document.getElementById('c').getContext("2d");


  
  var x = secretArrayX[pluscounter];
  var y=secretArrayY[pluscounter];

if (onlyonce==0) {
 
   console.log('its okay', )
  onlyonce=1;
  lastXX=x-10;
  lastYY=y-10;
}
     ctx.beginPath();
        ctx.strokeStyle = $('#selColor').val();
        ctx.lineWidth = $('#selWidth').val();
        ctx.lineJoin = "round";
        ctx.moveTo(lastXX, lastYY);
        ctx.lineTo(x, y);
        ctx.closePath();
        ctx.stroke();
    console.log( lastXX, lastYY, x, y)
    lastXX = x; lastYY = y;

  pluscounter++;

  if (pluscounter<secretArrayX.length) {
    setTimeout(myMove2,2000)
    myMove2();
  }
  }




function collision($div1, $div2) {
  //console.log('in here bro', $div1, $div2)
        var x1 = $div1.offset().left;
        var y1 = $div1.offset().top;
        var h1 = $div1.outerHeight(true);
        var w1 = $div1.outerWidth(true);
        var b1 = y1 + h1;
        var r1 = x1 + w1;
        var x2 = $div2.offset().left;
        var y2 = $div2.offset().top;
        var h2 = $div2.outerHeight(true);
        var w2 = $div2.outerWidth(true);
        var b2 = y2 + h2;
        var r2 = x2 + w2;

        if (b1 < y2 || y1 > b2 || r1 < x2 || x1 > r2) return false;
        console.log('collide')
     document.getElementById('c').width = document.getElementById('c').width-20;
       $('#animate').attr('style', 'background-color: red');
        clearInterval(startTimer);
        return true;
      }
  
   
	</script>
</html>
