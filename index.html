<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
	          加班

	<!-- <input type="text" id="input"><br> -->
  <textarea id="input" cols="40" rows="5"></textarea>

</head>

  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>

  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.0.4/d3.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.6.1/firebase.js"></script>

  <script src="//cdn.opencpu.org/opencpu-0.4.js"></script>
  
<script type="text/javascript">

 var msg = window.prompt("请写你的名字", "名字");
//document.body.style.backgroundColor = "#E9967A";
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBzoGXjJy2mnSc24f_gIcGu-drC3jJoLE4",
    authDomain: "blcok-d1c5f.firebaseapp.com",
    databaseURL: "https://blcok-d1c5f.firebaseio.com",
    projectId: "blcok-d1c5f",
    storageBucket: "blcok-d1c5f.appspot.com",
    messagingSenderId: "680002878921"
  };
  firebase.initializeApp(config); 

 var database = firebase.database();
  // var myWorker = new Worker('worker.js');

//setInterval(app, 3000) 

var visualalgo = document.getElementById("input");
  visualalgo.style.position="absolute";

visualalgo.style.left = 480+'px';
  visualalgo.style.top = 50+'px';



var onlyOnce=0;
var finalString;
var messageArray=[];

var canceladd=0;


$(document).focus().keyup(

   function(e){
     if(e.keyCode === 8|| e.keycode == 46)
        //messageArray.push('delete')
        messageArray.pop();
        spitoutmessage();
       
   }
 )  




//one part
  $(document).keypress(function(event){
 console.log(String.fromCharCode(event.which)); 
 var inputz = String.fromCharCode(event.which)

messageArray.push(inputz);

if (messageArray.length>=5) {
spitoutmessage();

}

});
//




//second part

function spitoutmessage () {
  document.getElementById('input').value=' ';
  finalString=' ';
console.log(messageArray)
for(var i=0; i< messageArray.length; i++) {

  var character = messageArray[i];
  var thereisaspace=0;

if (character==' ') {
thereisaspace=1;
}    

if (onlyOnce==1) {
  finalString= finalString + character
}


    if (onlyOnce==0) {
      finalString = character; 
      onlyOnce=1;
    }

console.log(finalString)
  

}
document.getElementById('input').value=finalString;
saveme();
//messageArray=[];
}
//

function saveme () {
  var msg2 =msg
       var ref=database.ref(msg2);

ref.set(finalString);
}


</script>




</html> 
