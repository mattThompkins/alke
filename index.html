<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
</head>
<style type="text/css">
	canvas { border: 1px solid #ccc }
</style>
<canvas id="c" width="1000" height="500"></canvas>
<!-- <input x-webkit-speech> -->
<button onclick="aidraw()">AI draw</button>
<button onclick="checkdata()">See data</button>

<!-- <textarea id="results" cols="80" rows="5"></textarea>
<button onclick="startDictation()">Start</button> -->
<!-- <input type="text" id="speech" style="font-size: 40px;"  name="speech" size="50" /> -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>


<script>

array = ['1', '2', '3', 'xx1', '4', '5', 'xx2', '6', '7', '8', 'xx3'];

for(var i =0; i<array.length; i++) {
  var st= array[i];
  var num= 'xx'+i;
if (st=='xx1') {
   var it= array.indexOf(st);
  it++
 array = array.slice(it, array.length);
}

}
// var it= array.indexOf('xx');
//it++
  //array.splice(it, 1);
//it=it-1;

//array = array.slice(it, array.length); //Need to assign it to the same or another variable

console.log(array);

var startgo=0; 

 var recognizer = null;
recognize();
var whatusersays='';
            function recognize()
            {
                //speechRecognization interface is the heart of recognization API
                window.speechRecognition = window.speechRecognition || window.webkitSpeechRecognition || window.mozSpeechRecognition || window.webkitSpeechRecognition;

                if(window.speechRecognition == undefined)
                {
                    // alert("Speech Recogniztion API Not Supported");
                }
                else
                {
                    //create a speechRecognization object
                    recognizer = new speechRecognition();

                    //If set to "false" then recognizer stops listening automatically when user stops speaking the first sentence.
                    recognizer.continuous = true;

                    //specify the language of speech. langauge must be in BCP 47 standard.
                    recognizer.lang = "en-US";

                    //it set to true then onresult callback is fired after every word spoken by the user. Otherwise after end of sentence.
                    recognizer.interimResults = true;


                    //fired when speech recognization starts listening.
                    recognizer.onstart = function(){
                       // alert("Recogniztion API started");
                    }

                    //fired everytime user stops speaking.
                    recognizer.onresult = function(event){  
                        //event.resultIndex returns the index of first word spoken in the currently stoped sentence.
                        //event.results.length is the total number of words spoken in this session.
                        for(var count = event.resultIndex; count < event.results.length; count++)
                        {
                            //event.results array contains a array of word objects.
                            //event.results[count][number], here 2D represents the most probable work for the spoken word.
                            //event.result[count][number].transscript returns word string of the most probable word of the select word index.  
                            // document.getElementById("output").innerHTML +=
                           // console.log(event.results[count][0].transcript);
                            whatusersays=event.results[count][0].transcript;
                            //console.log('what the heck',whatusersays)
 if (whatusersays.indexOf('start') > -1) {
  console.log('start baby')
  startgo=1;
 }
  if (whatusersays.indexOf('stop') > -1) {
  console.log('stop')
  startgo=0;
 }
                        }
                    }

                    //fired when recognization is stopped manually or automatically.
                    recognizer.onend = function(){
                        recognizer = null;
                        //alert("Recogniztion API stopped");
                    }

                    recognizer.start();
                }
            }

            function stop()
            {
                if(recognizer != null)
                {
                    //stop it manually
                    recognizer.stop();
                    //alert("Recognization API stopped");
                }
            }

///


var secretArrayX=[];
var secretArrayY=[];
var orginacoordinateX=[];
var orginacoordinateY=[];
var agentX=[];  //clone of originacoordX
var counter=0;
 var negate=0; 
   var el = document.getElementById('c');
var ctx = el.getContext('2d');

var isDrawing, points = [ ];

el.onmousedown = function(e) {
  isDrawing = true;
     
  points.push({ x: e.clientX, y: e.clientY });
  //console.log('baby',points)
};

el.onmousemove = function(e) {
  if (!isDrawing) return;

  //ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
  points.push({ x: e.clientX, y: e.clientY });
// console.log('baby',e.clientX, e.clientY)
secretArrayX.push(e.clientX);
     secretArrayY.push(e.clientY);
  ctx.beginPath();
  ctx.moveTo(points[0].x, points[0].y);
  //console.log(points[0].x, e.clientX)
  for (var i = 1; i < points.length; i++) {
    ctx.lineTo(points[i].x, points[i].y);
  }
  ctx.stroke();
};

el.onmouseup = function() {
  isDrawing = false;
  console.log('switz', points)
  orginacoordinateX.push(points[0].x)
  agentX=orginacoordinateX;
  orginacoordinateY.push(points[0].y)
  //orginacoordinateX.push('XX');
  //orginacoordinateY.push('YY')
counter+=1;
var xsample = 'XX'+counter
var ysample = 'YY'+counter
console.log('exlusive', xsample, ysample)
  secretArrayX.push(xsample);
  secretArrayY.push(ysample)
  console.log('wo de', orginacoordinateX,orginacoordinateY)
  console.log('baby',secretArrayX,secretArrayY)

  points.length = 0;
};
//    el.onmouseup = function(e) {
// negate=0;
// console.log('wo kao')
//     }
// jQuery(function($) {

 

//     var currentMousePos = { x: -1, y: -1 };
//     $(document).mousemove(function(event) {
       
 

        

//         // $(document).mousedown(function(event) {  //if you want to draw by making the shape first and then clicking and then the shape appears. 
//         //    ctx.stroke();
//         // });
     
   
       
// if (negate==0) {
//    //console.log(currentMousePos.x)
//           //console.log(currentMousePos.y)
//           if (startgo==1) {
//              currentMousePos.x = event.pageX;
//         currentMousePos.y = event.pageY;

//          ctx.lineWidth = 10;
//   ctx.lineJoin = ctx.lineCap = 'round';
//        ctx.lineTo(currentMousePos.x,  currentMousePos.y);
//             ctx.stroke();
//               secretArrayX.push(currentMousePos.x);
//          secretArrayY.push(currentMousePos.y);
//           }
 
// }
      

//     });

//     // ELSEWHERE, your code that needs to know the mouse position without an event
//     if (currentMousePos.x < 10) {
//         // ....
//     }
// });

function aidraw() {
// if (startgo==1) {
  
//    console.log(secretArrayX.length);
// console.log(secretArrayY.length);
//var idleInterval = setInterval(timetoDraw, 2000); 
timetoDraw();
 
}


function checkdata() {
  console.log('i will draw this')
   console.log(secretArrayX);
console.log(secretArrayY);
  ctx.clearRect(0, 0, el.width, el.height);

// timetoDraw();
}


var didi=0; 
var it2=0;
function timetoDraw () {//
var times = 0;

  //ctx.lineWidth = 10;
  //ctx.lineJoin = ctx.lineCap = 'round';
  console.log(secretArrayX.length);
  console.log(secretArrayY.length);
  //for(var m=0; m<orginacoordinateY.length; m++) {/////

// var f1=orginacoordinateY[m];

var xx;
var yy;
var xpos;
 var ypos;
pupos();
function pupos () {

   // for(var q=0; q<agentX.length; q++) {

        xx =orginacoordinateX[0];
        yy=orginacoordinateY[0];
didi++;
console.log('creator',didi)
//        if (yy=='YY') {
//   var it= orginacoordinateY.indexOf('YY');
//   it=it-1;
//   yy=orginacoordinateY[it]
//   console.log(yy)
//   // it++
//   // console.log('text',orginacoordinateY);
//   // orginacoordinateY = orginacoordinateY.slice(it, orginacoordinateY.length); 
//   //  console.log('trer',orginacoordinateY);

  
// }

//       if (xx=='XX') {
//          var it= orginacoordinateX.indexOf('XX');
//   it=it-1;
//   xx=orginacoordinateX[it]
//   console.log(xx)
//   // var it= orginacoordinateX.indexOf('XX');
//   // it++
//   // orginacoordinateX = orginacoordinateX.slice(it, orginacoordinateX.length); 
  
// }
// console.log('first pupos',orginacoordinateX, orginacoordinateY )
// console.log('why twice')

console.log('pupos',times,xx, yy)

var it= orginacoordinateX.indexOf(xx);
  orginacoordinateX.splice(it, 1);

  var it2= orginacoordinateY.indexOf(yy);
    orginacoordinateY.splice(it, 1);


console.log('ordinary',orginacoordinateX, orginacoordinateY)
       ctx.beginPath();
         ctx.moveTo(xx, yy);
          racken();
   // }


// if (didi==0) {

  
//   times++
//   console.log('racken', times)
// }
}


function racken () {//
if (secretArrayX.length>1) {//
    console.log('harmony', secretArrayX.length)
  for(var i=0; i<secretArrayX.length; i++) {//
    //ctx.save()
    //console.log(secretArrayX.length);
    //console.log('count',i)
    // if (i<orginacoordinateX.length && startgo==0) {
    //   var xx =orginacoordinateX[i];
    //    var yy=orginacoordinateY[i];
    //    console.log('pupos',xx, yy)
    //    ctx.beginPath();
    //      ctx.moveTo(xx, yy);
    //      startgo=1;

    // }

     
    xpos = secretArrayX[i];
   ypos = secretArrayY[i];
var cloney='';
var clonex='';
var xsample='XX'+didi;
var ysample='YY'+didi;
console.log('nothin',xsample);
console.log('nothin',ysample);
           if (xpos==xsample) {//
            clonex=xpos;
  var it= secretArrayX.indexOf(xpos);
  var pro=it;
  it++
   var string=secretArrayX[it];
    it2= secretArrayX.indexOf(string);
  console.log('before',pro,it,it2,string,'lazy',secretArrayX)
 secretArrayX = secretArrayX.slice(it, secretArrayX.length);  //0, it = good
 console.log('after',secretArrayX)
 xpos=secretArrayX[it];
 // startgo=0;
 //  console.log('finished', startgo)

  
}//

      if (ypos==ysample) {//
        cloney=ypos;
  var it= secretArrayY.indexOf(ypos);
  it++
  secretArrayY = secretArrayY.slice(it, secretArrayY.length); 
 ypos=secretArrayY[it];
  
}//


  
   
     console.log('yeah',xpos,ypos)


    // ctx.moveTo(23, 35);

//if (xpos>=1 && ypos>=1) {//
     ctx.lineWidth = 10;
ctx.lineJoin = ctx.lineCap = 'round';
//ctx.strokeStyle = 'green';
    ctx.lineTo(xpos, ypos);
   //ctx.closePath();
setTimeout(secondLayer,2000)
    ctx.stroke();
   // ctx.restore()
console.log('i drew')

  

//}//
    if (cloney==ysample&&clonex==xsample) {//
  pupos();
  console.log('shun yi')

}//


       //ctx.lineTo(xpos, ypos);
    

   //ctx.drawImage(xpos, ypos);
  }

}//

 
}//

function secondLayer () {
      ctx.lineWidth = 10;
ctx.lineJoin = ctx.lineCap = 'round';
//ctx.strokeStyle = 'green';
    ctx.lineTo(xpos, ypos);
   //ctx.closePath();

    ctx.stroke();
}

}//



</script>
<body>

<h1>Say Start to begin</h1>
<p>Say stop when you are finished drawing</p>




</body>
</html>
