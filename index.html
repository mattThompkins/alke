
<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<head>

</head>

<body>
	
</body>
</html>

<style type="text/css">
	#wrapper {
	background-color: red:
}

 button.link { background:none;border:none; }
</style>

<div id= "zhishikudiv" style="background-color:#344152;width:30px;height:2000px;border:1px solid black;padding:15px;">

</div>

<div id= "whiteborder1" style="background-color:#FFFFFF;width:150px;height:2000px;border:1px solid black;padding:15px;">
	
</div>

<div id= "whiteborder2" style="background-color:#FFFFFF;width:1000px;height:2000px;border:1px solid black;padding:15px;">
 <img src="openmic.png" id="mic" width="60" height="60" onclick="imagepick()">

<input type="text" id="ask" size="50" width="100px" placeholder="æ‚¨æœ‰ä»€ä¹ˆé—®é¢˜?" onkeypress="return runScript(event)">

 <input type="checkbox" id="ch1" value="1">
 <input type="checkbox" id="ch2" value="2">
 <input type="checkbox" id="ch3" value="3">
 <input type="checkbox" id="ch4" value="4">
 <input type="checkbox" id="ch5" value="5">

 <input id="humanteach" placeholder="å†™å¯¹çš„ç­”æ¡ˆ" size="80" type="text" />

	</div>


<button id ="refresh" type="button0" onclick="newbuttonalpha()">åˆ·æ–°</button>

<button id ="bm" class="link" type="button1" onclick="newbutton()">é—®é¢˜è¾…åŠ©</button>

	<button id ="bm2" class="link" type="button2" onclick="newbutton2()">é—®é¢˜æäº¤</button>
<button type="button" id="submitbutton" onclick="tijiao()">æäº¤</button>
<button type="button" id="submitbutton2" onclick="tijiao2()">æäº¤</button>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.0.4/d3.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script> 


<script>

	  var config = {
    apiKey: "AIzaSyBzoGXjJy2mnSc24f_gIcGu-drC3jJoLE4",
    authDomain: "blcok-d1c5f.firebaseapp.com",
    databaseURL: "https://blcok-d1c5f.firebaseio.com",
    projectId: "blcok-d1c5f",
    storageBucket: "blcok-d1c5f.appspot.com",
    messagingSenderId: "680002878921"
  };
  firebase.initializeApp(config);

//activate database
  var database = firebase.database();
var querydata='';
var auset =0; 

//global variable
var guanjianci=[];
var visualalgo = document.body.appendChild(document.createElement('div'));



///emotion content
var posadj = new Array();//forcalculations
 posadj = [ "é›„ä¼Ÿ", "æ¼‚äº®", "ç¾ä¸½", "æ–¹ä¾¿", "äº†ä¸èµ·", "ç¾å¥³", "å¸…", "é«˜å…´", "å¿ƒæƒ…", "æ¿€åŠ¨", "ç¬‘", "çˆ±æƒ…", "å–„è‰¯", "èªæ˜", "å¸…å“¥", "é¦™é†‡", "é€æ˜", "æ™¶è¹", "çº¯å‡€", "å…¸é›…", "å¼€æœ—", "èˆ’é€‚", "æ¸…æ¾ˆ", "é¢“åºŸ", "æ¸©æŸ”", "æƒŠè‰³", "æ·¡æ¼ ", "æ·¡å®š", "å†·é™", "ç«¯åº„", "æ—¶å°š", "å¿«ä¹", "ä¸°ç›ˆ", "åœ†æ»‘", "å–œæ¬¢", "æ»¡æ„", "ç‰¹åˆ«", "å‰å®³", "çˆ±", "å¥½", "è‰¯å¥½", "æœºä¼š", "å¯èƒ½æ€§å¤šå¤§", "ç¤¼ç‰©", "å¾—å¥½", "å°Šæ•¬", "æ¿€åŠ¨äººå¿ƒ", "æ„Ÿè°¢", "æœºä¼š", "ä¿¡å¿ƒ", "æ­£è½¨", "é¼“åŠ±", "æ”¯æŒ", "ä¸é”™", "ä¸é”™", "è¿æ°”", "é…·ç‚«", "æ¾ä¸€å£æ°”", "å…¬å¹³", "æ»éš", "è°¢è°¢", "å¸®åŠ©", "éå¸¸ç†è§£", "å¥‰çŒ®", "æ— ç§çš„", "å¥–èµ", "å…‰è¾‰", "å‹è°Š", "å£®é˜”", "æ”¾æ¾", "å¯¹æ­¤ç•¥ä¸ºæ•æ„Ÿ", "ç´§å¼ ", "ç´§å¼ ", "æ„‰", "ä¿æŠ¤", "å°Šæ•¬", "â™¥", "ğŸ˜„", "ğŸ˜", "ğŸ˜º", "ğŸ˜¸", "ğŸ˜ƒ", "ğŸ˜€", "ğŸ˜†", "â˜ºï¸", "ğŸ˜Š", "ğŸ˜‡", "ğŸ˜", "ğŸ˜˜", "ğŸ˜š", "ğŸ˜‹", "â¤ï¸", "çƒ­å¿ƒ", "å¥½äºº", "å‡ºè‰²", "å—ç›Š", "æ„Ÿåˆ°è‡ªè±ª", "èªæ˜", "èµ¢", "ä¹", "ç¾å¥½", "å¥½åƒ", "å…¬å¹³", "èˆ’æœ", "å¹³é™", "è‹±é›„", "æœ‰è¶£", "å¯¹å¾…", "æŒç»­", "æ­£ç¡®", "æ²»ç–—", "è£èª‰", "çš†é†‰æˆ‘ç‹¬é†’", "åˆ©ç›Š", "æ­£",  "ä¼Ÿ", "ç¾", "å¹½é»˜", "ä¼Ÿå¤§", "åšæŒ", "èµ", "é­”æ€§", "æ¸…æµ", "è¯´çš„ğŸ‘", "å¤§å¿«äººå¿ƒ", "çœŸç›¸äº†", "çœŸç›¸äº†", "ç»æµå®åŠ›", "å‰ææœ‰ä¸€å®šçš„ç»æµå®åŠ›", "ğŸ‘", "è¶…çº§", "è¶…çº§æ£’", "å¾ˆæ£’", "å¾ˆæ£’", "éå¸¸æ£’", "è€¿ç›´", "å¿ƒé™", "å¾ˆäº®", "åŠ æ²¹", "å¼€å¿ƒ", "èº«ä½“å¥åº·", "ç§¯æ", "æ•¬ä½©", "ä½©æœ", "å¤©èµ‹", "å¤©èµ‹å¼‚ç¦€", "æœ‰æ‰", "æ¥¼ä¸»å¥¶å¥¶è¿™ä¹Ÿå¤ªç‰›äº†å§ï¼å¤§èµï¼æœŸå¾…ä¸‹æ–‡ï¼å¥½å¥‡é—®ä¸‹æ¥¼ä¸»å¯æ˜¯æˆ‘å¤§å—é€šäºº", "233333", "666", "å¹³å®‰", "ç‘•ç–µ", "æ£’æ£’", "æ¬£æ¬£å‘è£", "ç™»é«˜æœ›è¿œ", "é”¦ç»£å‰ç¨‹", "æœ´ç´ å¤§æ–¹", "å£®å¿—å‡Œäº‘", "å¿—å­˜é«˜è¿œ", "å¤§å±•èº«æ‰‹", "ç¤¼è²Œ", "å½¬å½¬æœ‰ç¤¼", "ç²¾åŠ›å……æ²›", "æ–‡è´¨å½¬å½¬", "ä¸¾æ­¢åº„é‡", "ä½“é­„å¥å£®", "èƒ¸æ€€å¤§å¿—", "ä»»åŠ³ä»»æ€¨", "ä»»åŠ³ä»»æ€¨", "æ²¡æœ‰ç¤¼è²Œ", "è…è´¥", "çš„å¥½", "ä½œå¼Š", "ææ€ª", "å¥½äº¤æƒ…", "ååˆ†", "æ”¹å–„", "æ”¹å–„", "å¥½è½¬", "æ„Ÿåˆ°è‡ªè±ª", "æ‰©å¼ ", "èµ¢å¾—", "æˆ‘ä¼šå—ç›Š", "å—ç›Š", "æˆ‘å–œæ¬¢", "å¾ˆå¥½", "å®Œç¾çš„", "çƒ­å¿ƒ", "æˆ‘æƒ³ä½ ", "æˆ‘æŒ‰æ—¶", "æœ‰è¶£", "èµåŒ", "æœ€å¥½çš„", "å¹³ç­‰", "äº†è§£", "æ˜ç™½æˆ‘", "å¥½ä¸»æ„", "ç¥è´º", "æˆ‘ä»¬æ¥å—", "æˆ‘æ¥å—", "çˆ±å“Ÿ", "å°Šé‡" ];
var negadj = new Array();//for calculations
negadj =[ "ç´§å¼ ", "å¿§è™‘", "æ„¤æ€’", "å®³æ€•", "é‡è›®", "éšæ™¦", "é˜´éœ¾", "æé¾™", "ä¼¤å¿ƒ", "ç”Ÿæ°”", "ä¼ªè£…", "æ€", "æˆ‘é ", "æˆ‘æ“", "å‚»é€¼", "å“­æ³£", "å“­ç²—", "ç¬¨", "å¾ˆå·®", "ä¸‘", "æ²®ä¸§", "éƒé—·", "æ‚²ä¼¤", "æ‚²", "ä¼¤å®³", "åµæ¶", "æ‰“æ¶", "è®¨åŒ", "è‰°éš¾", "ä¸å¥½", "å¸®æ´¾æˆå‘˜", "ä¸å¥½", "ä¸å¥½", "è¿Ÿåˆ°", "ä¼¤è€…", "ä¼¤", "æ­»", "æ€¥", "æªäº†", "æ‰“ä½ ", "ä¸¥é‡", "äº‹æ•…", "æƒŠå“", "æªå‡»å—å®³è€…", "å—å®³è€…", "å—å®³", "æ­»äº¡", "æ“¦ä¼¤", "å±é™©", "å°„æ€", "å‡¶çŠ¯", "å«ŒçŠ¯", "ç ´äº‹", "æˆ‘è¿˜æ²¡æ‰¾åˆ°", "èº«äº¡", "è¿˜è¦", "è®¢å•è¿˜æ²¡", "ç”Ÿä½ æ°”", "æš´æ€’", "æƒ¹äººåŒ", "çƒ¦", "é¢ è¦†", "è¯‹æ¯", "åµæ¶", "åµå“­", "ç–¾ç—…", "å‹’ç˜«", "å¤ªå", "ç´§å¼ ", "æç ¸", "æŸå®³", "æƒ©ç½š", "æŠ±æ€¨", "æŠ¢èµ°", "ç‰¢éªš", "å¯æ€œ", "é—­å˜´", "äº‰æ‰§", "åµé—¹", "ä¾µèš€", "å·®åŠ²", "å›šç‰¢æˆ¿", "ç–¼", "ç´¯", "ç´§å¼ ", "éš¾", "hate", "ğŸ˜", "ğŸ˜”", "ğŸ˜Ÿ", "ğŸ˜£", "ğŸ˜–", "ğŸ˜«", "ğŸ˜©", "ğŸ˜¤", "ğŸ˜ ", "ğŸ˜¡", "ğŸ˜±", "ğŸ˜¨", "ğŸ˜°", "ğŸ˜¢", "ğŸ˜¥", "ğŸ˜­", "ğŸ˜“", "ğŸ’”", "ä»™äººæ¿æ¿", "å¥¶å¥¶çš„è…¿çš„", "ä½ å†·é…·ä½ æ— æƒ…ä½ æ— ç†å–é—¹", "é—æ†¾", "æŒ£æ‰", "æ¶å¿ƒ", "æ¶å¿ƒ", "äº‰è®®", "å¤±å»äº†", "å¯æ€•", "ç²—é²", "ç–‘é—®", "æ‰“ç ´", "æ‡’", "å®³æ€•", "æ‰¹è¯„", "å¾ˆå·®", "æ‚²æƒ¨", "æ„šè ¢", "é‡å¤äº†ä¸€ä¸ªé”™è¯¯", "å¤±è´¥", "æ— æ³•å¤„ç†", "å‹åŠ›", "è¢«æ’•ç ´", "æ’•ç ´", "é™çº§", "å­¤ç‹¬", "å“­æ³£", "å¤ªä¹…", "ç—…", "ç”Ÿç—…", "éª—", "å´©æºƒ", "å¤æ‚", "æ²®ä¸§","ææ…Œ", "é¥¿æ­»", "ç³Ÿ", "è®¨åŒ", "å¤ªå¤š", "å·äº†", "ç½ª", "çŠ¯", "æŒ‡æ§", "çŠ¯ç½ª", "æ¨", "åŠ£åŠ¿", "è«åå…¶å¦™", "ä¸çˆ±", "æˆ‘ä¸çˆ±", "çš†é†‰", "åŒæ¶", "æˆ¾æ°”", "æµªè´¹", "ä¸èˆ’æœ", "ç›‘", "ç‹±", "ä¸å‡", "å“­", "æ€€å¿µ", "å¼ºè¿«", "æ€•", "æˆ‘æ€•", "æˆ‘æ€•", "æˆ‘æƒ³ä¸", "æ–—äº‰", "å¾ˆåµ", "æ¯’", "æ²¡æ³•æ¥å—", "å¾ˆè´µçš„", "è¶…ä¸", "ä»€ä¹ˆé¬¼", "å¤ªææ€–", "ææ€–", "è¿™ä¹ˆå·®", "å¥½ç”Ÿæ°”", "ä¸æ‡‚", "ç–¯", "éª‚", "æ‹…å¿ƒ", "æ¶ˆæ", "é—·éªš", "æ¶ˆç­", "æ³¯ç­", "å«‰å¦’", "å«‰å¦’", "å«‰å¦’", "åè¿æ°”", "è¯´ä¸æ¸…", "æ··è›‹", "ä½“ç½š", "ç½šæ¬¾", "å¾ˆæƒ¨", "å¾ˆæƒ¨", "è·‘é¢˜äº†", "è¿æ°”å·®", "ç†è§£çš„ç‹­éš˜äº†", "éœ¸æ°”", "ç‘•ç–µ", "ä¸æ­£ç¡®", "å†·æ¼ ", "æ— åŠ¨äºè¡·", "ç–²ä¹", "åŠ³ç´¯", "æ— ç”Ÿæ°”", "æ— ç¤¼", "è¢«æ¿€æ€’", "å›°æƒ‘", "ä¸å¿«", "ä¸æ„‰å¿«çš„", "çƒ¦é—·", "éš¾å—", "éš¾å—", "å‹æŠ‘", "éƒé—·", "æ²‰éƒ", "é˜´éƒ", "æŠ‘éƒå¯¡æ¬¢", "æƒ­æ„§", "ä¸¢è„¸", "ä¸¢äºº", "äºå¿ƒ", "æ„§ç–š", "éš¾å ª", "æ²®ä¸§", "æ²¡æœ‰å¥½", "å¾ˆè‡­", "è…è´¥", "åˆ†æ‰‹", "ç¦»å©š", "æ— çŸ¥", "æ‹‰è‚šå­", "æ²¡æœ‰æ„ä¹‰çš„", "æ²¡æœ‰æ„ä¹‰", "ä»–å¦ˆçš„", "ä»–å¦ˆçš„", "ä½œå¼Šç‰Ÿå–", "ä½œå¼Š", "æ„ŸæŸ“", "æ— æƒ…", "äº¡", "å¤±å»", "åæ‚”", "å¤±æœ›", "æˆ‘å¾ˆå¿™", "æˆ‘å¿™", "æˆ‘çœ‹ä¸", "æˆ‘å¾ˆç—›", "å¾ˆç—›", "ç—›", "å¤ªè´µ", "å¾ˆè´µ", "è¢«æ’•ç ´", "ä¸æ»¡æ„", "æˆ‘ä¸", "å¾ˆå¼±", "å¤ªå¼±", "è™å¾…", "ä¸å‡†æ—¶", "æˆ‘å¿…é¡»æ‰¹è¯„ä½ ", "æˆ‘æ”¾å¼ƒ", "æˆ‘æ— ", "ä¸‘é™‹", "å‚»", "æˆ‘ä¸", "å¤ªå°", "è°", "å¤ªä¸¥æ ¼", "å¤ªå†·", "å¾ˆå†·", "æˆ‘ä¸æ‡‚", "å¿½è§†", "ç–‘è™‘", "æ„Ÿå†’", "å µè½¦", "å¤ªæ…¢" ];

var negcounter = ["ä¸"];
var neutralcounter =["å¤ª","éå¸¸","å¾ˆ"];


  var nounhanzi =["æˆåˆ†","å¥¶ç²‰","ä¹³åˆ¶å“","ç‰›å¥¶","ç‰›","å¥¶æ²¹","è¥å…»","ç²‰çŠ¶","å·´æ°æ€èŒ","èŒ¢","å©´å„¿","ç™¾åˆ†","æ¯ä¹³å–‚å…»","ä½è„‚","å®å®","å®è´","ç«¥å¹´","ä¹³ç³–","å¤åˆ","é›…åŸ¹","å‘³é“","å£å‘³","èº«ä½“","å¥åº·","ç¾ç´ ","é…æ–¹","å®å®é…æ–¹","é—®é¢˜","é›…åŸ¹å–œåº·å®","ç‰›æ å¥¶ç²‰","é›…åŸ¹äº²æŠ¤", "é›…åŸ¹èæ™º","å¥¶","ç‡•çª","ç‚–å¼€"];
var answerArray=[];
var questionArray=[];

///emotion content end 



//variables used in some functions

var saveIndex=0;
var Mostof =[];
var counter=0;
var find =[];
  var input;
var plus=0;
var keywordBank=[];
var keywordindexes=[];
 var Keyword;//gets main key word
 var trueKeyword;
 var clonekeyword;
 var masterKeyword;

var uniqueNames = [];
var uniqueQuestions =[];

//


//zhishiku blue side border
 var tupian =document.getElementById('zhishikudiv');
tupian.style.position="absolute";
  tupian.style.left = 0+'px';
  tupian.style.top = 0+'px'; 

//white border 1
 var whitebor =document.getElementById('whiteborder1');
whitebor.style.position="absolute";
  whitebor.style.left = 60+'px';
  whitebor.style.top = 0+'px'; 



//white border 2
 var whitebor =document.getElementById('whiteborder2');
whitebor.style.position="absolute";
  whitebor.style.left = 241+'px';
  whitebor.style.top = 0+'px'; 


//button1
 var b1 =document.getElementById('bm');
b1.style.position="absolute";
  b1.style.left = 120+'px';
  b1.style.fontSize = "large";
  b1.style.top = 80+'px'; 

//button2
 var b2 =document.getElementById('bm2');
b2.style.position="absolute";
  b2.style.left = 120+'px';
  b2.style.fontSize = "large";
  b2.style.top = 120+'px'; 


//zhishiku words
var zhishikuword = document.body.appendChild(document.createElement('div'));
zhishikuword.style.position="absolute";
zhishikuword.style.left = 5+'px';
 zhishikuword.style.top = 75+'px'; 
 zhishikuword.style.color='white'; 
  zhishikuword.innerHTML  ='çŸ¥è¯†åº“';




  //ç›®å‰çŸ¥è¯†åº“æ”¶å½•é—®é¢˜ä¸º
  var tin1 = document.body.appendChild(document.createElement('div2'));
tin1.style.position="absolute";
tin1.style.left = 305+'px';
 tin1.style.top = 35+'px'; 
  tin1.innerHTML  ='ç›®å‰çŸ¥è¯†åº“æ”¶å½•é—®é¢˜ä¸º:';


  //äººå·¥ä¼˜åŒ–é—®é¢˜
   var tin2 = document.body.appendChild(document.createElement('div3'));
tin2.style.position="absolute";
tin2.style.left = 305+'px';
 tin2.style.top = 65+'px'; 
  tin2.innerHTML  ='äººå·¥ä¼˜åŒ–é—®é¢˜:';

  //openmic
   var mic =document.getElementById('mic');
mic.style.position="absolute";
  mic.style.left = 105+'px';
  mic.style.top = 135+'px'; 

//input box 1 

   var askbox =document.getElementById('ask');
askbox.style.position="absolute";
  askbox.style.left = 160+'px';
  askbox.style.top = 155+'px'; 


     var refresh =document.getElementById('refresh');
refresh.style.position="absolute";
  refresh.style.left = 725+'px';
  refresh.style.top = 155+'px'; 



  ///guan jian ci

     var tin3 = document.body.appendChild(document.createElement('div4'));
tin3.style.position="absolute";
tin3.style.left = 360+'px';
 tin3.style.top = 215+'px'; 
  tin3.innerHTML  ='å…³é”®è¯:';

//æƒ…ç»ª

     var tin4 = document.body.appendChild(document.createElement('div5'));
tin4.style.position="absolute";
tin4.style.left = 360+'px';
 tin4.style.top = 255+'px'; 
  tin4.innerHTML  ='æƒ…ç»ª:';//ğŸ˜¡, ğŸ˜ƒ



 // div 6
 var ex1='1Q.)';
  ex1=ex1.fontcolor("orange");
   var ex2='2Q.)';
   ex2=ex2.fontcolor("orange");
    var ex3='3Q.)';
    ex3=ex3.fontcolor("orange");
     var ex4='4Q.)';
     ex4=ex4.fontcolor("orange");
      var ex5='5Q.)';
      ex5=ex5.fontcolor("orange");

var masterquestion1='q1';
var masterquestion2='q2';
var masterquestion3='q3';
var masterquestion4='q4';
var masterquestion5='q5';


var masterAnswer='a1';
var masterAnswer2='a2';
var masterAnswer3='a3';
var masterAnswer4='a4';
var masterAnswer5='a5';



  var tin5 = document.body.appendChild(document.createElement('div6'));
tin5.style.position="absolute";
tin5.style.left = 300+'px';
 tin5.style.top = 305+'px'; 


  tin5.innerHTML  ='ç›¸ä¼¼é—®é¢˜ä¸ç­”æ¡ˆ '+ "<br>"+' '+ex1+''+masterquestion1+'' + "<br>"+ '1A.)'+masterAnswer+'' + "<br>"+ ''+ex2+''+masterquestion2+'' + "<br>"+ '2A.)'+masterAnswer2+'' + "<br>" + ''+ex3+''+masterquestion3+'' + "<br>"+ '3A.)'+masterAnswer3+'' + "<br>" + ''+ex4+''+masterquestion4+'' + "<br>"+ '4A.)'+masterAnswer4+'' + "<br>" + ''+ex5+''+masterquestion5+'' + "<br>"+ '5A.)'+masterAnswer5+'';



   var tin6 = document.body.appendChild(document.createElement('div6'));
tin6.style.position="absolute";
tin6.style.left = 360+'px';
 tin6.style.top = 680+'px'; 
  tin6.innerHTML  ='æœ€æ­£ç¡®çš„ç­”æ¡ˆæ˜¯ï¼š';

//checks
   var check1 =document.getElementById('ch1');
check1.style.position="absolute";
  check1.style.left = 240+'px';
  check1.style.top =  680+'px';

   var check1baby = document.body.appendChild(document.createElement('div7'));
check1baby.style.position="absolute";
check1baby.style.left = 500+'px';
 check1baby.style.top = 680+'px';
  check1baby.innerHTML  ='1';

    var check2 =document.getElementById('ch2');
check2.style.position="absolute";
  check2.style.left = 270+'px';
  check2.style.top =  680+'px';

     var check2baby = document.body.appendChild(document.createElement('div8'));
check2baby.style.position="absolute";
check2baby.style.left = 530+'px';
 check2baby.style.top = 680+'px';
  check2baby.innerHTML  ='2';

   var check3 =document.getElementById('ch3');
check3.style.position="absolute";
  check3.style.left = 300+'px';
  check3.style.top =  680+'px';

     var check3baby = document.body.appendChild(document.createElement('div9'));
check3baby.style.position="absolute";
check3baby.style.left = 560+'px';
 check3baby.style.top = 680+'px'; 
  check3baby.innerHTML  ='3';


   var check4 =document.getElementById('ch4');
check4.style.position="absolute";
  check4.style.left = 330+'px';
  check4.style.top =  680+'px';

     var check4baby = document.body.appendChild(document.createElement('div10'));
check4baby.style.position="absolute";
check4baby.style.left = 590+'px';
 check4baby.style.top = 680+'px';
  check4baby.innerHTML  ='4';



  var check5 =document.getElementById('ch5');
check5.style.position="absolute";
  check5.style.left = 360+'px';
  check5.style.top =  680+'px';

     var check5baby = document.body.appendChild(document.createElement('div11'));
check5baby.style.position="absolute";
check5baby.style.left = 620+'px';
 check5baby.style.top = 680+'px';
  check5baby.innerHTML  ='5';

////checks end



  var tin7 = document.body.appendChild(document.createElement('div12'));
tin7.style.position="absolute";
tin7.style.left = 260+'px';
 tin7.style.top = 780+'px'; 
  tin7.innerHTML  ='ä»¥ä¸Šç­”æ¡ˆéƒ½ä¸å¯¹\nè¾“å…¥æ­£ç¡®ç­”æ¡ˆ:';


 var submit =document.getElementById('submitbutton');
submit.style.position="absolute";
submit.style.left = 650+'px';
submit.style.top = 680+'px';




var tin8 =document.getElementById('humanteach');
tin8.style.position="absolute";
tin8.style.left = 240+'px';
tin8.style.top =  780+'px';


 var submit2 =document.getElementById('submitbutton2');
submit2.style.position="absolute";
submit2.style.left = 980+'px';
submit2.style.top =  780+'px';



//new page
  function newbutton () {

console.log('new button1')
  }


//new page 2
  function newbutton2 () {

console.log('new button2')
  }






//sound, speech to text
function imagepick () {
	var recognizer = new webkitSpeechRecognition();
recognizer.lang = "zh-CN";
recognizer.onresult = function(event) {
    if (event.results.length > 0) {
        var result = event.results[event.results.length-1];
        if(result.isFinal) {
            console.log(result[0].transcript);
            document.getElementById('ask').value= result[0].transcript;
        }
    }  
};
recognizer.start();


  console.log('nhl');
}


var getthekey;



///beginning of core functions
function runScript(e) {
    if (e.keyCode == 13) {
        Mostof=[];
      counter=0;
      plus=0;
var input  = document.getElementById('ask').value;

///query

var ref = database.ref(input)
ref.on('value',gotData, errData);

function gotData(data) {
//console.log(data.val())
var coordinates =data.val();
querydata=coordinates;
//console.log(coordinates)
var keys = Object.keys(coordinates)
console.log(coordinates, keys)

for(var i=0; i<keys.length;i++) {

  var p=keys[i];

var shuju=coordinates[p]



 
}

 querydata=data.val();

}
function errData(err) {
   console.log(err)
}



console.log('error is here bro')



///count total objects

var ref2 = database.ref()
ref2.on('value',gotData2, errData2);

function gotData2(data) {
//console.log(data.val())
var coordinates =data.val();

//console.log(coordinates)
var keys = Object.keys(coordinates)
console.log(coordinates, keys)
getthekey=keys;
 

}
function errData2(err) {
   console.log(err)
}

 




///query
var collectindex ='';
for(var i=0; i<input.length;++i){
var cancel=0;
      var com=input[i];
      var com2 =input[i]+input[i+1];
      var com3 =input[i]+input[i+1]+input[i+2];
      var com4 =input[i]+input[i+1]+input[i+2]+input[i+3];
     
  console.log('mju',com,com2)
    if (nounhanzi.indexOf(com4)> -1) {
cancel=1;
       collectindex=com4; 
       keywordBank.push(collectindex);
       keywordindexes.push(i);
      }
          if (nounhanzi.indexOf(com3)> -1 && cancel==0) {
cancel=1;
       collectindex=com3;
       keywordBank.push(collectindex);
       keywordindexes.push(i);
      }

         if (nounhanzi.indexOf(com2)> - 1 && cancel==0) {
                 cancel=1;
                 keywordindexes.push(i);
       collectindex=com2; 
        console.log('å¥¶ç²‰ fyy', com2)
       keywordBank.push(collectindex);
       console.log(keywordBank)
      }

      if (nounhanzi.indexOf(com)> -1&& cancel==0) {
        keywordindexes.push(i);
cancel=1;
  console.log('å¥¶ç²‰ fyy 2', com2)
      collectindex=com;
      keywordBank.push(collectindex);

      }

    
   
       
     
      

    }//for loop

 console.log('final bank',keywordBank)
 guanjianci=keywordBank;
if (collectindex=='å¥¶ç²‰') {
  collectindex='naifen'
}
    Keyword=collectindex+'.json'
    console.log('the Keyword',Keyword)
    //setTimeout(qax,1000)
    //setTimeout(zhishiku,1000)
    zhishiku();
     //begin();
    }//end of first if statement
}//end of function


var globaljson;


//zhishiku();

function zhishiku() {
//        for (var i = 0; i < nounhanzi.length; i++) {
//          Keyword =nounhanzi[i]
var input  = document.getElementById('ask').value;
var bigclue =0;
var shenmeIndex;

var saveindex=0;
var saveindex2 =0;
var spyarray=[];
var betterKey=0;
  //newStr.splice(ind,strr.length);
   //trueKeyword= keywordBank.pop();

  for(var i=0; i< input.length;i++) {
    var fuck = input[i];
    // if (beginadding==1) {
    //   spyarray.push(fuck);
    // }

    if (fuck=='çš„') {
saveindex2=i;
}

if (fuck=='ä¹ˆ') {
//beginadding=1;
saveindex=i;
}



  }

 var masterindex;

 if (saveindex>saveindex2) {
masterindex = saveindex;
 }

  if (saveindex2>saveindex) {
masterindex = saveindex2;
 }

var beenhere=0;
console.log('hjk', masterindex, keywordBank,keywordindexes)
 for(var i=0; i<keywordBank.length;++i) {
  var kite = keywordBank[i];
  var realindex= keywordindexes[i];

  //var indexbaby = input.indexOf(kite);

var checkminus = realindex - masterindex;

if (checkminus==2 || checkminus==1) {
  beenhere=1;
  trueKeyword=kite;
betterKey=1;
  console.log('trueKeyword', checkminus, kite, realindex)
  break;
}


 }



if (betterKey==0) {
  console.log('no betterKey')
  trueKeyword= keywordBank.pop();
}



         if (trueKeyword=='å¥¶ç²‰') {
  //trueKeyword='naifen'
}

         if (trueKeyword=='æˆåˆ†') {
  //trueKeyword='æˆåˆ†1'
}


console.log('inside',trueKeyword)
         Keyword=trueKeyword+'.json'
       
     console.log('the keeeeey',Keyword)
$.getJSON(''+encodeURIComponent(Keyword)+'', 'utf8',function(json) {//æˆåˆ†.json
     // this will show the info it in firebug console
     if (json=='æˆåˆ†.json') {
     console.log('wgh',json);
   }
     globaljson=json;
    if (json.length>1) {
      setTimeout(iteration,1000)
    }
});
  //}


}

function iteration () {

uniqueNames=[];
uniqueQuestions=[];
questionArray=[];
answerArray=[];


for(var i =0; i<globaljson.length;i++) {

var phase1 = globaljson[i];


questionArray.push(phase1.question);
answerArray.push(phase1.answer);


}//end of globaljson for loop

if (questionArray.length==30690) {
console.log('question',questionArray);
console.log('answer',answerArray)
}
console.log('question',questionArray);
console.log('answer',answerArray)

$.each(answerArray, function(i, el){
    if($.inArray(el, uniqueNames) === -1) uniqueNames.push(el);
});

$.each(questionArray, function(i, el){
    if($.inArray(el, uniqueQuestions) === -1) uniqueQuestions.push(el);
});



 setTimeout(qax,1000)
setTimeout(qingxu,2000)

}//end of iteration function


////




//emotion

function qingxu () {
	 tin1.innerHTML  ='ç›®å‰çŸ¥è¯†åº“æ”¶å½•é—®é¢˜ä¸º:'+answerArray.length+'æ¡';
  tin2.innerHTML  ='äººå·¥ä¼˜åŒ–é—®é¢˜:'+getthekey.length+'æ¡';
  var poshao =0;
 var neghao=0;
var neuhao=0;

var doublenegative=0;
var budebu=0;
var makepositive=0;
var inputs  = document.getElementById('ask').value;
for(var z=0; z< negadj.length;z++) {
var compare = negadj[z];


if (inputs.indexOf(compare)>-1) {
  neghao++
  console.log('nhl',compare)


  var index = inputs.indexOf(compare);
var index2 = inputs.indexOf('ä½†');
var secondindex = index2 - index;

if (secondindex<=2&&inputs.indexOf('ä½†')>1) {
  console.log('dan rule');
  //neghao=neghao-1;
}

//if bu is after a negative word æ— çŸ¥ä¸æ˜¯é”™
var splitwords = inputs.slice(" ");
var buindex = splitwords.indexOf("ä¸");
var meindex = splitwords.indexOf("æ²¡");
var cancel=0;
var check=compare.slice(" ");
if (check.indexOf("ä¸")>-1) {
  console.log('blanket')
cancel=1;
}
if (cancel==0) {
if (index < buindex || index< meindex) {
  //neghao=neghao-2;
  console.log('denzel',splitwords,buindex,meindex,index)
}

}

}



}


//pos

for(var p=0; p< posadj.length;p++) {
var compare = posadj[p];
//console.log(compare)

if (inputs.indexOf(compare)>-1) {
  console.log('positve 12345',compare, inputs)

  poshao++

  //meiyou rule. 

  if(inputs.indexOf("æ²¡æœ‰")>-1 ) {

    var checkindex =inputs.split(" "); 
    var checkindex2 = inputs.indexOf("æ²¡");
      var checkindex3 = inputs.indexOf(compare);

    var tyu= checkindex3-checkindex2;
console.log('trg',checkindex, tyu,checkindex2,checkindex3)
    if (tyu<=4) {
      neghao+=2; 
      console.log("counter positive")
    }
  }
}


}

//negcounter
var checj=0;
for(var z=0; z< inputs.length;z++) {
var compare = inputs[z];

console.log(compare)


if (negcounter.indexOf(compare)>-1) {

//   if ((doublenegative==1 && negadj.indexOf(compare)>-1) {


//   console.log("WTF positive")
// }
doublenegative++;


console.log("WTF negative")
//dan rule

    
    }
  //neghao++
}



//double negative section

if (inputs.indexOf("ä¸ä¸")>-1&&doublenegative<3) {
  doublenegative=2;
}



//neutral

for(var z=0; z< neutralcounter.length;z++) {
var compare = neutralcounter[z];
//console.log(compare)

if (inputs.indexOf(compare)>-1) {
  //neuhao++;
  // neghao-2;
  // poshao-2;
}




}





for(var i=0; i<neutralcounter.length; i++) {
  var lop = neutralcounter[i];
  var pop = inputs.indexOf(lop);

  var index = pop + 1;
var final = inputs[index];
console.log('final', final)
//      if (negadj.indexOf(final) > -1 || negcounter.indexOf(final) > -1) {
// makepositive=1;
//      }

}
var itsneutral;




for(var i=0; i<inputs.length; i++) {
var compare = inputs[z];

var dontincrease=0; 
if (posadj.indexOf(compare)>-1||negadj.indexOf(compare)>-1 ) {
  console.log("WTF")
dontincrease=1;
}

if (negadj.indexOf(compare)>-1) {
   var pop = inputs.indexOf(compare);
   var before = pop-1;
   var after = pop + 1;

var stringbefore = inputs[before];
var stringafter = inputs[after];
   if (stringbefore==stringafter) {
    console.log('SAME WORD', stringbefore);
    neghao=0; 
    itsneutral=1;
   }
}
if (dontincrease==0) {
  neuhao+=0.2;
}

}

//end neutral


////check our knowledge






//brotha
var checkneutralonot = neuhao-neghao;
var checkneutralonot2 = neuhao-poshao;
if (checkneutralonot>=15 ||checkneutralonot2>=15 ) {//|| (makepositive==1 && neghao>poshao)
  //itsneutral=1;
  
}

var negate=0;
// if(neghao>=1 && (doublenegative==2||doublenegative==3)) {
// poshao+=3;
// }


if (neghao>=1 && doublenegative==1) {
  makepositive=1;
}

if (neghao>=1 && doublenegative==2) {
  makepositive=0;
  neghao=11;
  console.log('why insrf')
}
////pos

if (poshao>=1 && doublenegative==1) {
   makepositive=0;
  neghao=11;
}

if (poshao>=1 && doublenegative==2) {
   makepositive=1;
  console.log('why insrf')
}

console.log('WHAT THE HELL', doublenegative)


if (doublenegative==1 && inputs.indexOf("ä¸é”™")>-1) {
  doublenegative=0; 
}
//
if (poshao==0 && neghao==0 && doublenegative==0) {
    console.log('caught it2')
  itsneutral=1;
}
var diff = poshao-neghao;

if (diff==0 && neuhao>poshao && neuhao>neghao && neghao>=1) {
  itsneutral=1;
  console.log('caught it')
}

if (budebu==1) {//||inputs.length>10
  doublenegative=doublenegative-1;
   console.log('change double')
}
if (doublenegative==1||doublenegative==3) {
  neghao++;
  console.log('change add')
  poshao=poshao-1;
}

if (poshao>=neuhao ||neghao>=neuhao) {
  negate==1; 
}

console.log(makepositive)
console.log('output', poshao,neghao,neuhao,makepositive,doublenegative)

if (poshao>neghao || makepositive==1) {
console.log('WHjjj', poshao, neghao, makepositive)
  if (poshao>=1 || doublenegative>=1) {
  negate=1;
}
 tin4.innerHTML='';
      tin4.innerHTML  ='æƒ…ç»ª:ğŸ˜ƒ';//ğŸ˜¡, ğŸ˜ƒ

//cumulativeEmotion.push('pos');
  }

  if (inputs.length<5&&poshao==neghao) {
  //makepositive=1;
 

}
 // console.log('ä»–ä¸å¬æˆ‘', itsneutral,poshao,neghao,negate)
if (neghao>=poshao && neghao>=1 && negate==0 ||(doublenegative==1 && itsneutral==0)) {
  negate=1;
  
   
 tin4.innerHTML='';
      tin4.innerHTML  ='æƒ…ç»ª:ğŸ˜¡';//ğŸ˜¡, ğŸ˜ƒ
      //cumulativeEmotion.push('neg');
  // document.getElementById("image").src="sadcloud.gif";
}



if (negate==0 || itsneutral==1) {

if (((neuhao>poshao&&neuhao>neghao)) || itsneutral==1) {
 tin4.innerHTML='';
      tin4.innerHTML  ='æƒ…ç»ª:ğŸ˜¶';//ğŸ˜¡, ğŸ˜ƒ
}
}





}

//emotion



//qax

function qax () {
	 input  = document.getElementById('ask').value;
	for(var i=0; i<input.length;++i){
var cancel=0;
      var com=input[i];
      var com2 =input[i]+input[i+1];
      var com3 =input[i]+input[i+1]+input[i+2];
      var com4 =input[i]+input[i+1]+input[i+2]+input[i+3];
     
  console.log('mju',com,com2)
    if (nounhanzi.indexOf(com4)> -1) {
cancel=1;
       collectindex=com4; 
       keywordBank.push(collectindex);
       keywordindexes.push(i);
      }
          if (nounhanzi.indexOf(com3)> -1 && cancel==0) {
cancel=1;
       collectindex=com3;
       keywordBank.push(collectindex);
       keywordindexes.push(i);
      }

         if (nounhanzi.indexOf(com2)> - 1 && cancel==0) {
                 cancel=1;
                 keywordindexes.push(i);
       collectindex=com2; 
        console.log('å¥¶ç²‰ fyy', com2)
       keywordBank.push(collectindex);
       console.log(keywordBank)
      }

      if (nounhanzi.indexOf(com)> -1&& cancel==0) {
        keywordindexes.push(i);
cancel=1;
  console.log('å¥¶ç²‰ fyy 2', com2)
      collectindex=com;
      keywordBank.push(collectindex);

      }

    
   
       
     
      

    }//for loop

	console.log('ghy',keywordBank, guanjianci)
 trueKeyword= keywordBank[0];

if (keywordBank.length>1) {
  tin3.innerHTML  ='å…³é”®è¯:'+keywordBank+'';
}
if (keywordBank.length==1) {
 tin3.innerHTML  ='å…³é”®è¯:'+trueKeyword+'';
console.log('inside',trueKeyword, querydata)
}

if (querydata!==null) {
  auset=1; 
}


 input  = document.getElementById('ask').value;
var arrayinput = [];//input.split(",")
var arrayquestion=[]; //= input.split(",")
var questionOutput =[];
var validity=[];
var finalanswers=[];
var saveindex=[];
var finalFive =[];
var secretquestions =[];
var counyorigin=0;
var couny=0;



  //5 answers
 
console.log('answers', finalanswers,   'questions', finalFive)


// tin1='';

//  tin1.innerHTML  ='ç›®å‰çŸ¥è¯†åº“æ”¶å½•é—®é¢˜ä¸º:'+answerArray.length+'æ¡';
 console.log(answerArray.length, tin1)
var cloneAnswerArray= [];



cloneAnswerArray=uniqueNames;
questionArray=uniqueQuestions;
console.log('quest', questionArray)

 masterAnswer=cloneAnswerArray[Math.floor(Math.random()*cloneAnswerArray.length)];
cloneAnswerArray.splice(cloneAnswerArray.indexOf(masterAnswer), 1);
//console.log(cloneAnswerArray)

  masterAnswer2=cloneAnswerArray[Math.floor(Math.random()*cloneAnswerArray.length)];
//cloneAnswerArray=answerArray.filter(function(e) { return e !== masterAnswer2 })
cloneAnswerArray.splice(cloneAnswerArray.indexOf(masterAnswer2), 1);
  //console.log(cloneAnswerArray)

  masterAnswer3=cloneAnswerArray[Math.floor(Math.random()*cloneAnswerArray.length)];
  cloneAnswerArray.splice(cloneAnswerArray.indexOf(masterAnswer3), 1);
// cloneAnswerArray=answerArray.filter(function(e) { return e !== masterAnswer3 })
  //console.log(cloneAnswerArray)

  masterAnswer4=cloneAnswerArray[Math.floor(Math.random()*cloneAnswerArray.length)];
  cloneAnswerArray.splice(cloneAnswerArray.indexOf(masterAnswer4), 1);
//cloneAnswerArray=answerArray.filter(function(e) { return e !== masterAnswer4 })
 // console.log(cloneAnswerArray)

  masterAnswer5=cloneAnswerArray[Math.floor(Math.random()*cloneAnswerArray.length)];
  cloneAnswerArray.splice(cloneAnswerArray.indexOf(masterAnswer5), 1);
//cloneAnswerArray=answerArray.filter(function(e) { return e !== masterAnswer5 })
  //console.log(cloneAnswerArray)


  //////question


    masterquestion1=questionArray[answerArray.indexOf(masterAnswer)];
 // answerArray.splice(index, 1);

  masterquestion2=questionArray[answerArray.indexOf(masterAnswer2)];
 // questionArray=questionArray.filter(function(e) { return e !== masterquestion2 })

  masterquestion3=questionArray[answerArray.indexOf(masterAnswer3)];
    //  questionArray=questionArray.filter(function(e) { return e !== masterquestion3 })

  masterquestion4=questionArray[answerArray.indexOf(masterAnswer4)];
     // questionArray=questionArray.filter(function(e) { return e !== masterquestion4 })

  masterquestion5=questionArray[answerArray.indexOf(masterAnswer5)];
      //questionArray=questionArray.filter(function(e) { return e !== masterquestion5 })



 console.log( masterquestion1, masterquestion2, masterquestion3, masterquestion4, masterquestion5)
  masterquestion1= masterquestion1.fontcolor("orange");
   masterquestion2= masterquestion2.fontcolor("orange");
    masterquestion3= masterquestion3.fontcolor("orange");
     masterquestion4= masterquestion4.fontcolor("orange");
      masterquestion5= masterquestion5.fontcolor("orange");
    


if (auset==1) {
  masterquestion1 = document.getElementById('ask').value;
  masterquestion1 =masterquestion1.fontcolor("orange");
  masterAnswer = querydata;
}

tin5.innerHTML='';
 tin5.innerHTML  ='ç›¸ä¼¼é—®é¢˜ä¸ç­”æ¡ˆ '+ "<br>"+' '+ex1+''+masterquestion1+'' + "<br>"+ '1A.)'+masterAnswer+'' + "<br>"+ ''+ex2+''+masterquestion2+'' + "<br>"+ '2A.)'+masterAnswer2+'' + "<br>" + ''+ex3+''+masterquestion3+'' + "<br>"+ '3A.)'+masterAnswer3+'' + "<br>" + ''+ex4+''+masterquestion4+'' + "<br>"+ '4A.)'+masterAnswer4+'' + "<br>" + ''+ex5+''+masterquestion5+'' + "<br>"+ '5A.)'+masterAnswer5+'';





    var mq1=questionArray[Math.floor(Math.random()*questionArray.length)];
   var mq2=questionArray[Math.floor(Math.random()*questionArray.length)];
    var mq3=questionArray[Math.floor(Math.random()*questionArray.length)];
    var mq4=questionArray[Math.floor(Math.random()*questionArray.length)];
     var mq5=questionArray[Math.floor(Math.random()*questionArray.length)];



}//end of qax


function tijiao () {
	var  val =document.getElementById('ask').value;
	var finalvalue;

	if(document.getElementById("ch1").checked == true) {
console.log('ch1')
masterquestion1.fontcolor('red')
 console.log(masterquestion1)
 masterAnswer.fontcolor('red')
finalvalue=masterAnswer;
}
	if(document.getElementById("ch2").checked == true) {
console.log('ch2')
 masterquestion2.fontcolor('red')
masterAnswer2.fontcolor('red')
  
  finalvalue=masterAnswer2;
}
	if(document.getElementById("ch3").checked == true) {
console.log('ch3')
 masterquestion3.fontcolor('red')
masterAnswer3.fontcolor('red')
finalvalue=masterAnswer3;
}
	if(document.getElementById("ch4").checked == true) {
console.log('ch4')
masterquestion4.fontcolor('red')
masterAnswer4.fontcolor('red')
finalvalue=masterAnswer4;
}
	if(document.getElementById("ch5").checked == true) {
console.log('ch5')
 masterquestion5.fontcolor('red')
masterAnswer5.fontcolor('red')
finalvalue=masterAnswer5;
}

  tin5.innerHTML = ''+ex1+''+masterquestion1+'' + "<br>"+ '1A.)'+masterAnswer+'' + "<br>"+ ''+ex2+''+masterquestion2+'' + "<br>"+ '2A.)'+masterAnswer2+'' + "<br>" + ''+ex3+''+masterquestion3+'' + "<br>"+ '3A.)'+masterAnswer3+'' + "<br>" + ''+ex4+''+masterquestion4+'' + "<br>"+ '4A.)'+masterAnswer4+'' + "<br>" + ''+ex5+''+masterquestion5+'' + "<br>"+ '5A.)'+masterAnswer5+'' + "<br>"
 
//var finalvalue = savevalue;
     var matchedinput =val;
       var ref=database.ref(matchedinput);

ref.set(finalvalue);
}

function tijiao2 () {

console.log('f2')

var savevalue = document.getElementById('humanteach').value;
var  val =document.getElementById('ask').value;

masterAnswer=savevalue;
masterquestion1 = val;
masterquestion1 = masterquestion1.fontcolor('red')
masterAnswer = masterAnswer.fontcolor('red')
  tin5.innerHTML = ''+ex1+''+masterquestion1+'' + "<br>"+ '1A.)'+masterAnswer+'' + "<br>"+ ''+ex2+''+masterquestion2+'' + "<br>"+ '2A.)'+masterAnswer2+'' + "<br>" + ''+ex3+''+masterquestion3+'' + "<br>"+ '3A.)'+masterAnswer3+'' + "<br>" + ''+ex4+''+masterquestion4+'' + "<br>"+ '4A.)'+masterAnswer4+'' + "<br>" + ''+ex5+''+masterquestion5+'' + "<br>"+ '5A.)'+masterAnswer5+'' + "<br>"
 
var finalvalue = savevalue;
     var matchedinput =val;
       var ref=database.ref(matchedinput);

ref.set(finalvalue);

}



function newbuttonalpha () {

document.getElementById('ask').value='';
masterAnswer='';
masterAnswer2='';
masterAnswer3='';
masterAnswer4='';
masterAnswer5='';

masterquestion1='';
masterquestion2='';
masterquestion3='';
masterquestion4='';
masterquestion5='';

keywordBank=[];


}



</script>
